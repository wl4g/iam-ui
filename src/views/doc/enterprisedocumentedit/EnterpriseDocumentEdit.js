// Generated by XCloud DevOps for Codegen, refer: http://dts.devops.wl4g.com
import {transDate, getDay} from 'utils/'
import Editor from "@toast-ui/vue-editor";


export default {
    name: 'enterpriseDocumentEdit',
    data() {
        return {
            //查询条件
            editorText: ['```youtube', 'XyenY12fzAk', '```'].join('\n'),
            editorOptions: {
                language: 'zh-CN'
            }
        }
    },

    mounted() {
        //this.getData();
        //this.test();
    },
    methods: {

        youtubePlugin() {

            Editor.codeBlockManager.setReplacer('youtube', function(youtubeId) {
                // Indentify multiple code blocks
                const wrapperId = `yt${Math.random()
                    .toString(36)
                    .substr(2, 10)}`;

                // Avoid sanitizing iframe tag
                setTimeout(this.renderYoutube.bind(null, wrapperId, youtubeId), 0);

                return `<div id="${wrapperId}"></div>`;
            });
        },

        renderYoutube(wrapperId, youtubeId) {
            const el = document.querySelector(`#${wrapperId}`);

            el.innerHTML = `<iframe width="420" height="315" src="https://www.youtube.com/embed/${youtubeId}"></iframe>`;
        },

        test(){
            const editor = new Editor({
                el: document.querySelector('#editor'),
                //previewStyle: 'vertical',
                height: '100%',
                initialValue: this.editorText,
                language: "zh-CN",
                // Step 2: Set the defined plugin function as an option value
                plugins: [this.youtubePlugin]
            });
        }

    }
}
